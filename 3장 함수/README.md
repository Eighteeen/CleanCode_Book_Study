# 3장 함수

## 🔍 리딩 도움
- _( p. 47 )_ `SRP(The Single Responsibility Principle)` : 하나의 클래스를 수정해야 한다면, 그 이유는 오직 한가지여야만 한다. (p.19 참조)
- _( p. 47 )_ `OCP(The Open Closed Principle)` : 클래스는 확장에 열려 있어야 하며 변경에 닫혀 있어야 한다. (p.19 참조)
- _( p. 55 )_ 시간적 결합(temporal coupling) : `메서드 A는 언제나 반드시 메서드 B보다 먼저 호출해야 한다.`와 같이 시간 순서에 따른 결합도를 말한다.


## ✨ 이슈 리스트
- [[Switch 문] - 추상팩토리에서 파생 클래스, 다형성 등을 사용하면 해결?](https://github.com/Eighteeen/CleanCode_Book_Study/issues/3)
- [[함수] - 3-2 예제가 3-1 코드와 정말 같은 동작을 하는지?](https://github.com/Eighteeen/CleanCode_Book_Study/issues/4)
- [[함수] - '추상화 수준' 이라는 개념을 좀 더 명확하게 설명하자면 어떻게 설명해야 할까?](https://github.com/Eighteeen/CleanCode_Book_Study/issues/5)
- [[부수효과를 일으키지 마라!] - 시간적 결합과 순서 종속성에 대한 정확한 뜻](https://github.com/Eighteeen/CleanCode_Book_Study/issues/6)
- [[명령과 조회를 분리하라!] - 이 원칙을 우리 백준 풀이 코드에 적용한다면?](https://github.com/Eighteeen/CleanCode_Book_Study/issues/7)
- [[결론] - '재귀라는 기교'의 정확한 뜻](https://github.com/Eighteeen/CleanCode_Book_Study/issues/8)

## 📝 정리

### 토론 자료
- [~ 함수 인수](./reference/wsb_reference.pdf)
- [부수적인 효과를 일으키지 마라! ~ 결론](./reference/hsk_reference.pdf)


### 0. 함수는 어떻게 써야할까?
> 함수는 프로그램의 가장 기본적인 단위이다.

- 함수는 정보를 파악하기 쉬워야 한다.
- 함수는 읽기 쉽고 이해하기 쉬워야한다.
- 함수는 의도를 분명히 표현해야 한다.
- 함수는 처음 읽는 사람도 프로그램 내부를 직관적으로 파악할 수 있어야 한다.


### 1. 작게 만들어라!
> 함수를 만드는 첫째 규칙은 ‘작게!’다. 함수를 만드는 둘째 규칙은 ‘더 작게!’다.

- 각 함수는 명백해야 하며, 이야기 하나를 표현할 수 있어야 한다.
- 모든 함수가 2~4줄 만큼 짧으면 좋다.
- 함수에서 들여쓰기 수준은 1단이나 2단을 넘어서면 안 된다.

작게 만들면 함수는 읽고 이해하기 쉬워진다.


### 2. 한 가지만 해라!
> 함수는 한 가지를 해야 한다. 그 한 가지를 잘 해야 한다. 그 한 가지만을 해야 한다.

- 지정된 함수 이름 아래에서 추상화 수준이 하나인 단계만 수행한다면 그 함수는 한 가지 작업만 하는 것이다.
- 단순히 다른 표현이 아니라 의미 있는 이름으로 다른 함수를 추출할 수 있다면 그 함수는 여러 작업을 하는 셈이다.
- 한 가지 작업만 하는 함수는 자연스럽게 섹션으로 나누기 어렵다.

### 3. 함수 당 추상화 수준은 하나로!
> 함수가 확실히 ‘한 가지’ 작업만 하려면 함수 내 모든 문장의 추상화 수준이 동일해야 한다.

- 한 함수 내에 추상화 수준을 섞으면 코드를 읽는 사람이 헷갈린다.
- 각 함수는 일정한 추상화 수준을 유지하면서 한 가지 작업만 해야 한다.

#### 3-1. 내려가기 규칙
코드는 위에서 아래로 이야기처럼 읽혀야 좋다.

__한 함수 다음에는 추상화 수준이 한 단계 낮은 함수가 온다.
즉, 위에서 아래로 프로그램을 읽으면 함수 추상화 수준이 한 번에 한 단계씩 낮아진다.__
저자는 이를 내려가기 규칙이라고 부르기로 했다.

문단을 읽듯이 프로그램도 쭉 읽혀야 한다.


### 4. Switch 문
> __본질적으로 switch 문은 N가지를 처리한다.__  
> switch문은 작게 만들기 어렵고, 한 가지 작업만 하는 switch문을 만들기 어렵다.

저자는 다형적 객체를 생성하는 코드 안에서는 switch 문을 사용할 수 있다고 한다.
상속 관계로 switch 문을 숨긴 후에는 절대로 다른 코드에 노출하지 않아야 한다.

__switch 문은 불가피하게 사용되는 상황도 더러 생긴다.__

#### 4-1. 다형성을 이용해 Switch 문 숨기기
> 다형성을 이용하여 각 switch 문을 저차원 클래스에 숨기고 반복하지 않도록 한다.

- 목록 3-4 : switch 문을 사용해 Employee 유형을 판별하여 다른 값을 계산한다.
- 목록 3-5 : 추상 팩토리 안에서 switch 문을 사용해 Employee 파생 클래스의 인스턴스를 생성한다.

3-5 에서는 switch 문을 숨겼다. 다른 곳에서는 알 필요가 없어졌다.
급여를 어떻게 계산할지는 각 파생 클래스에서 구현하고, 함수는 인터페이스를 거쳐서 호출된다. 이제 다른 값을 계산하기 위해서 switch 문을 수정할 필요가 없어졌다.
다형적 객체를 생성하기 위해서만 switch 문이 쓰인다.

_관련 이슈 참고 : [[Switch 문] - 추상팩토리에서 파생 클래스, 다형성 등을 사용하면 해결?](https://github.com/Eighteeen/CleanCode_Book_Study/issues/3)_


### 5. 서술적인 이름을 사용하라!
> “코드를 읽으면서 짐작했던 기능을 각 루틴이 그대로 수행한다면 깨끗한 코드라 불러도 되겠다.” - 워드

함수가 작고 단순할수록 서술적인 이름을 고르기도 쉬워진다.

__서술적인 이름은?__
- 서술적인 이름을 사용하면 코드를 개선하기 쉬워진다.
- 이름이 길어도 괜찮다. 이름을 정하느라 시간을 들여도 괜찮다.

__서술적인 이름을 사용할 때는?__
- 함수 이름을 정할 때는 여러 단어가 쉽게 읽히는 명명법을 사용한다.
- 여러 단어를 사용해 함수 기능을 잘 표현하는 이름을 선택한다.
- 이름을 붙일 때는 일관성이 있어야 한다. 모듈 내에서 함수 이름은 같은 문구, - 명사, 동사를 사용한다.


### 6. 함수 인수
> 함수에서 이상적인 인수 개수는 0개다. 다음은 1개고, 다음은 2개다. 3개는 가능한 피하는 편이 좋다. 4개 이상은 특별한 이유가 필요하다. 특별한 이유가 있어도 사용하면 안 된다.

인수는 개념을 이해하기 어렵게 만든다. 인수 개수가 늘어날 수록 더 이해하기 어렵다.
출력 인수는 입력 인수보다 이해하기 어렵다.

__최선은 입력 인수가 없는 경우다.__

#### 6-1. 많이 쓰는 단항 형식
__아래의 경우가 아니라면 단항 함수는 가급적 피한다.__
- 인수에 질문을 던지는 경우
- 인수를 뭔가로 변환해 결과를 반환하는 경우
- 입력 인수로 시스템 상태를 바꾸는 이벤트의 경우

입력 인수를 변환하는 함수라면 변환 결과는 반환값으로 돌려준다.

#### 6-2. 플래그 인수
> 플래그 인수는 추하다.

함수가 한꺼번에 여러 가지를 처리한다고 대놓고 공표한다.

true인 경우, false인 경우인 함수를 따로 나누는 게 낫다.

#### 6-3. 이항 함수
__인수 2개가 한 값을 표현하거나, 자연적인 순서인 경우 이항 함수가 적절하다.__

불가피한 경우로 이항 함수를 사용해야 할 때도 있다. 하지만 __단항 함수로 바꾸도록 애써야 한다.__

#### 6-4. 삼항 함수
__상함 함수를 만들 때는 신중히 고려하자.__

여러 사람이 더러 알 수 있는 중요한 사항의 경우는 삼항 함수를 사용할 수도 있다.

#### 6-5. 인수 객체
__인수가 여러개 필요하다면 일부를 독자적인 클래스 변수로 선언해보자.__

변수를 묶어 넘기려면 이름을 붙여야 하므로 결국 눈속임을 위한 객체가 아니라, 개념을 표현하게 되는 것이다.

#### 6-6. 인수 목록
__인수 개수가 가변적인 함수도 필요할 때가 있다.__

__가변 인수를 전부 동등하게 취급하면 List 형 인수 하나로 취급할 수 있다.__ 가변 인수들을 묶어 하나의 인수로 생각할 수 있는 것이다.

__가변 인수를 취하는 함수는 단항, 이항, 삼항 함수로 취급될 수 있다.__ 하지만 이를 넘어서는 인수를 사용할 경우에는 문제가 있다.

#### 6-7. 동사와 키워드
__함수의 의도나 인수의 순서와 의도를 제대로 표현하려면 좋은 함수 이름이 필수다.__

단항 함수는 함수와 인수가 동사/명사 쌍을 이뤄야 한다.

함수 이름에 키워드를 추가하여 인수 순서를 기억할 필요 없도록 하자.

_토론 당시 요즘은 IDE가 워낙 잘 나오니 (변수 이름 등을 바로 알 수 있음) 키워드의 필요성이 없어진 것 아닐까 하는 의견이 나왔다._

### 7. 부수적인 표현을 일으키지 마라!
> 함수에서 한 가지를 하겠다고 약속하고선 남몰래 다른 것을 하지마라

- ex) 세션 초기화, 전역 변수 수정 등

### 8. 명령과 조회를 분리하라!
> 함수는 뭔가를 수행하거나 뭔가에 답하거나 둘 중 하나만 해야한다.

객체 상태를 변경하거나 객체 정보를 반환해야 한다.

### 9. 오류 코드보다 예외를 사용하라!
> 오류 코드로 분기처리 하는 것보다 예외를 사용하면 코드가 분리되어 깔끔해진다.

#### 9-1. Try/Catch 블록 뽑아내기
- try/catch 블록은 별도 함수로 뽑아내는 편이 좋다

#### 9-2. 오류 처리도 한가지 작업이다.
- 오류 처리하는 함수는 오류만 처리해야 마땅하다

### 10. 반복하지 마라!
> 중복 코드를 제거하려는 노력을 하자!

### 11. 구조적 프로그래밍
> 함수가 작다면 return, break, continue를 여러 차례 사용해도 괜찮다.

goto 문은 큰 함수에서만 의미가 있으므로, 작은 함수에서는 피해야만 한다.

### 12. 함수를 어떻게 짜죠?
> 처음부터 탁 짜내진 않는다.

처음에는 길고 복잡하다! 후에 코드를 다듬고, 함수를 만들고, 이름을 바꾸고, 중복을 제거하고, 메서드를 줄이고 순서를 바꾸다 보면 이 장에서 설명한 함수가 얻어진다!

### 13. 결론
> 이야기를 풀어가자!

프로그래밍 언어라는 수단을 사용해 좀 더 풍부하고 표현력이 강한 언어를 만들어 이야기를 풀어간다.
작성하는 함수가 분명하고 정확한 언어로 깔끔하게 맞아떨어져야 이야기를 풀어가기가 쉬워진다.

---

## 🎞 회고

- [진홍](./kjh.md)
- [승빈](./wsb.md)
- [수경](./hsk.md)
